import{u as g,r as i,C as h,a as _,b as j,c as v,g as x,j as s,L as y,d as u,e as b,f as C,O as P}from"./index-fd900118.js";import{u as O,H as k}from"./header-6f91dfe7.js";import{u as S}from"./use-navigate-with-params-2fae2b9f.js";import{C as w,s as E}from"./scroll-into-view-3daf5a34.js";const L=a=>a.city.name;function N(){return g(L)}const p=[{label:"Popular",value:"popular-desc"},{label:"Price: low to high",value:"price-asc"},{label:"Price: high to low",value:"price-desc"},{label:"Top rated first",value:"top-desc"}],f=i.memo(()=>{const a=Object.values(h),c=N(),[n]=_(),{setCity:l,resetCity:d}=b,o=j(),r=v(),e=S();return i.useEffect(()=>{const t=e(x(),{city:h.Paris,"sort-by":"popular-desc"});if(n){const m=n.get("city");m?o(l(m)):r(t)}else r(t)},[o,e,r,n,l]),i.useEffect(()=>()=>{o(d())},[]),s.jsx("div",{className:"tabs",children:s.jsx("section",{className:"locations container",children:s.jsx("ul",{className:"locations__list tabs__list",children:a.map(t=>s.jsx("li",{className:"locations__item",children:s.jsx(y,{className:u("locations__item-link","tabs__item",{"tabs__item--active":c===t}),to:e(x(),{city:t}),children:s.jsx("span",{children:t})})},t))})})})}),R=(a,c)=>{i.useEffect(()=>{const n=l=>{a.current&&!a.current.contains(l.target)&&c()};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[a,c])},I=i.memo(()=>{const[a,c]=i.useState(!1),n=i.useRef(null),[l,d]=_(),o=i.useMemo(()=>p.find(t=>l.get("sort-by")===t.value)||p[0],[l]);R(n,()=>{a&&c(!1)});const r=i.useCallback(e=>{c(!1),d(t=>{const m=new URLSearchParams(t);return m.set("sort-by",e),m})},[d]);return s.jsxs("form",{className:"places__sorting",action:"#",method:"get",children:[s.jsx("span",{className:"places__sorting-caption",children:"Sort by"}),s.jsxs("span",{className:"places__sorting-type",tabIndex:0,onClick:()=>c(e=>!e),children:[o.label,s.jsx("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:s.jsx("use",{xlinkHref:"#icon-arrow-select"})})]}),s.jsx("ul",{className:u("places__options","places__options--custom",{"places__options--opened":a}),ref:n,children:p.map(e=>s.jsx("li",{onClick:()=>r(e.value),className:u("places__option",{"places__option--active":o.value===e.value}),tabIndex:0,children:e.label},e.value))})]})}),B=i.memo(()=>{const a=O(),c=j(),[n,l]=i.useState(null),[d]=_(),o=d.get("sort-by"),r=i.useCallback(t=>{l(t)},[]),e=N();return i.useEffect(()=>{e&&o&&c(C(e))},[c,e,o]),s.jsxs("div",{className:"page page--gray page--main",children:[s.jsx(k,{}),(a==null?void 0:a.length)===0?s.jsxs("main",{className:"page__main page__main--index page__main--index-empty",children:[s.jsx("h1",{className:"visually-hidden",children:"Cities"}),s.jsx(f,{}),s.jsx("div",{className:"cities",children:s.jsxs("div",{className:"cities__places-container cities__places-container--empty container",children:[s.jsx("section",{className:"cities__no-places",children:s.jsxs("div",{className:"cities__status-wrapper tabs__content",children:[s.jsx("b",{className:"cities__status",children:"No places to stay available"}),s.jsx("p",{className:"cities__status-description",children:"We could not find any property available at the moment in Dusseldorf"})]})}),s.jsx("div",{className:"cities__right-section"})]})})]}):s.jsxs("main",{className:"page__main page__main--index",children:[s.jsx("h1",{className:"visually-hidden",children:"Cities"}),s.jsx(f,{}),s.jsx("div",{className:"cities",children:s.jsxs("div",{className:"cities__places-container container",children:[s.jsxs("section",{className:"cities__places places",children:[s.jsx("h2",{className:"visually-hidden",children:"Places"}),s.jsxs("b",{className:"places__found",children:[a.length," places to stay in"," ",e]}),s.jsx(I,{}),s.jsx("div",{className:"cities__places-list places__list tabs__content",children:s.jsx(P,{offers:a,onActiveOffer:r})})]}),s.jsx("div",{className:"cities__right-section",children:s.jsx(w,{city:e,offers:a,selectedOffer:n,onPointClick:t=>{E(`#${t}`)}})})]})})]})]})});export{B as default};
